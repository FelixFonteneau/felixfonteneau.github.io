webpackJsonp([1],{"66tU":function(e,t){},"9M+g":function(e,t){},Jmt5:function(e,t){},MXoo:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("7+uW"),n={name:"MineCell",props:{isOpen:{type:Boolean,required:!0},hasBomb:{type:Boolean,required:!0},hasFlag:{type:Boolean,required:!0},bombNb:{type:Number,required:!0},isFinished:{type:Boolean,required:!0},haveWon:{type:Boolean,required:!0}},methods:{getClass:function(){if(this.isFinished){if(this.hasFlag&&!this.hasBomb)return"flag open";if(this.hasBomb&&!this.haveWon)return"bomb";if(this.hasFlag)return"flag";if(!this.isOpen)return"notClickable"}return this.isOpen&&this.hasBomb?"bomb":this.isOpen?"open nb"+this.bombNb:this.hasFlag?"flag":""}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"cell",class:e.getClass()},[e.hasFlag?s("div",[e._v("\n    ‚öë\n  ")]):e._e(),e._v(" "),e.hasBomb&&e.isOpen?s("div",[e._v("\n    üí£\n  ")]):e._e(),e._v(" "),e.isOpen&&e.bombNb?s("div",[e._v("\n    "+e._s(e.bombNb)+"\n  ")]):e._e()])},staticRenderFns:[]};var r=s("VU/8")(n,o,!1,function(e){s("66tU")},null,null).exports,a={name:"Timer",props:{started:{type:Boolean,required:!0},stopped:{type:Boolean,required:!0}},data:function(){return{hour:0,minute:0,second:0,centisecond:0,totalCenti:0,status:"second"}},mounted:function(){var e=this;this.$interval=setInterval(function(){e.stopped||(e.centisecond++,e.totalCenti++,e.centisecond>99&&(e.second++,e.centisecond=0,e.second>59&&("second"===e.status&&(e.status="minute"),e.minute++,e.second=0,e.minute>59&&("minute"===e.status&&(e.status="hour"),e.hour++,e.minute=0))))},10)},destroyed:function(){clearInterval(this.$interval)},methods:{init:function(){this.hour=0,this.minute=0,this.second=0,this.centisecond=0,this.totalCenti=0,this.status="second"},getTime:function(){return this.second}},watch:{started:function(){this.init()},stopped:function(){if(this.stopped){var e={hour:this.hour,minute:this.minute,second:this.second,centisecond:this.centisecond,totalCenti:this.totalCenti};this.$emit("time",e)}}}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"timer"},[s("span",{staticClass:"inline"},[e._v("\n    ‚è±Ô∏è\n  ")]),e._v(" "),"hour"===e.status?s("span",{staticClass:"inline"},[e._v("\n    "+e._s(e.hour)+":\n  ")]):e._e(),e._v(" "),"second"!==e.status?s("span",{staticClass:"inline"},[e.second<10&&"hour"===e.status?s("span",{staticClass:"inline zero"},[e._v("\n      0\n    ")]):e._e(),e._v("\n    "+e._s(e.minute)+":\n  ")]):e._e(),e._v(" "),s("span",{staticClass:"inline"},[e.second<10&&"second"!==e.status?s("span",{staticClass:"inline zero"},[e._v("\n      0\n    ")]):e._e(),e._v("\n    "+e._s(e.second)+":\n  ")]),e._v(" "),s("span",{staticClass:"inline"},[e.centisecond<10?s("span",{staticClass:"inline zero"},[e._v("\n      0\n    ")]):e._e(),e._v("\n    "+e._s(e.centisecond)+"\n  ")])])},staticRenderFns:[]};var l=s("VU/8")(a,h,!1,function(e){s("u+4D")},"data-v-4fd118e0",null).exports,c=s("mvHQ"),u=s.n(c),m={name:"Scores",props:{newTime:{type:Object,required:!0},newScore:{type:Boolean,required:!0},gameType:{type:Object,required:!0}},data:function(){return{scores:[],scoresSuitable:[],bestScore:""}},mounted:function(){if(localStorage.getItem("scores"))try{this.scores=JSON.parse(localStorage.getItem("scores")),this.showScores(),console.log(this.scores)}catch(e){localStorage.removeItem("scores")}},methods:{addTime:function(){var e=new Date,t={time:this.newTime,date:(e.getUTCDate()<10?"0":"")+e.getUTCDate()+"/"+(e.getMonth()<10?"0":"")+e.getMonth()+"/"+e.getFullYear(),gameType:this.gameType},s=this.findIndex(this.newTime);s===this.scores.length||0===this.scores.length?this.scores.push(t):this.scores.splice(s,0,t),this.saveScores(),this.showScores()},findIndex:function(e){if(this.scores.length<1)return 0;for(var t=0;t<this.scores.length;t++)if(this.scores[t].time.totalCenti>e.totalCenti)return t;return this.scores.length},removeScore:function(e){this.scores.splice(e,1),this.saveScores()},saveScores:function(){var e=u()(this.scores);localStorage.setItem("scores",e)},showScores:function(){this.scoresSuitable=[];for(var e=1,t=0;t<this.scores.length;t++)if(this.scores[t].gameType.nbRows===this.gameType.nbRows&&this.scores[t].gameType.nbCols===this.gameType.nbCols&&this.scores[t].gameType.nbBombs===this.gameType.nbBombs){var s=(this.scores[t].time.hour?this.scores[t].time.hour+":":"")+(this.scores[t].time.minute||this.scores[t].time.hour?(this.scores[t].time.minute?"":"0")+this.scores[t].time.minute+":":"")+(!this.scores[t].time.second&&(this.scores[t].time.minute||this.scores[t].time.hour)||this.scores[t].time.second&&this.scores[t].time.second<10&&(this.scores[t].time.minute||this.scores[t].time.hour)?"0":"")+this.scores[t].time.second+":"+(!this.scores[t].time.centisecond||this.scores[t].time.centisecond<10?"0":"")+this.scores[t].time.centisecond;if(1===e)this.bestScore=s;else if(e>5)break;var i={pos:e++,time:s,date:this.scores[t].date};this.scoresSuitable.push(i)}1===e&&(this.bestScore="")}},watch:{newScore:function(){this.newScore&&this.addTime()},gameType:function(){this.showScores()}}},b={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-2",modifiers:{"collapse-2":!0}}],staticClass:"m-1"},[t("span",{staticClass:"bestScore"},[this._v("üîù "+this._s(this.bestScore))])]),this._v(" "),t("b-collapse",{staticClass:"scoresHistory",attrs:{id:"collapse-2"}},[t("p",{staticClass:"textHistory"},[this._v("Your best 5 times")]),this._v(" "),t("b-table",{attrs:{striped:"",hover:"",items:this.scoresSuitable}})],1)],1)},staticRenderFns:[]};var d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],staticClass:"m-1 help"},[s("span",{staticClass:"bestScore"},[e._v("‚ùì")])]),e._v(" "),s("b-collapse",{staticClass:"helpDropdown",attrs:{id:"collapse-1"}},[s("div",{staticClass:"textHelp"},[s("p",[e._v("\n        The goal is to open every empty cells and avoid bombs. If a cell have a number, it show the number of bombs within the 8 neighbouring cells.\n      ")]),e._v(" "),s("ul",[s("li",[e._v("\n          üí£ shows the number of bomb remaining.\n        ")]),e._v(" "),s("li",[e._v("\n          üôÇ shows the status of the game. Click on it to restart the game.\n        ")]),e._v(" "),s("li",[e._v("\n          ‚è±Ô∏è is a chronometer and shows the time since the beginning.\n        ")]),e._v(" "),s("li",[e._v("\n          üîù is the best time of the current game. Click on it to see the local leaderboard with your best times resolving the minesweeper.\n        ")])])])])],1)},staticRenderFns:[]};var v={name:"MineGrid",components:{MineCell:r,Timer:l,Scores:s("VU/8")(m,b,!1,function(e){s("jP+e")},"data-v-59ac48ec",null).exports,Help:s("VU/8")({name:"Help",data:function(){return{}},mounted:function(){},methods:{}},d,!1,function(e){s("edT4")},"data-v-87b7e310",null).exports},props:{nbCols:{type:Number,default:10},nbRows:{type:Number,default:8},nbBombs:{type:Number,default:10},restartGame:{type:Boolean,default:!1}},data:function(){return{haveBegun:!1,haveFinished:!1,haveWon:!0,gridSize:this.nbCols*this.nbRows,bombsRemaining:this.nbBombs,cellRemaining:this.nbCols*this.nbRows-this.nbBombs,cellGrid:[],smiley:"happy",timerStart:!1,timerStop:!0,time:{hour:0,minute:0,second:0,centisecond:0,totalCenti:0},newScore:!1}},mounted:function(){this.mountTheGrid()},methods:{mountTheGrid:function(){this.cellGrid=[];for(var e=0;e<this.gridSize;e+=1)this.cellGrid.push({hasBomb:!1,isOpen:!1,hasFlag:!1,bombNb:0})},restart:function(){this.haveBegun=!1,this.haveFinished=!1,this.haveWon=!0,this.gridSize=this.nbCols*this.nbRows,this.bombsRemaining=this.nbBombs,this.cellRemaining=this.nbCols*this.nbRows-this.nbBombs,this.cellGrid=[],this.smiley="happy",this.mountTheGrid(),this.timerStop=!0,this.timerStart=!1,this.newScore=!1},getGridStyle:function(){return"grid-template-columns: repeat("+this.nbCols+", 1fr);\n              width: "+85*this.nbCols/this.nbRows+"vh;"},initGrid:function(e,t){for(var s=0;s<this.nbBombs;){var i=Math.floor(Math.random()*this.gridSize);this.cellGrid[i].hasBomb||i===s||this.isInNeighborhood(i,t)||(this.cellGrid[i].hasBomb=!0,s++)}},clickCell:function(e,t){if(!this.haveFinished&&!e.hasFlag){if(!this.haveBegun){for(this.mountTheGrid(),this.initGrid(e,t),e=this.cellGrid[t];e.hasBomb;)this.mountTheGrid(),this.initGrid(e,t),e=this.cellGrid[t];this.haveBegun=!0,this.timerStart=!0,this.timerStop=!1}e.isOpen||(e.isOpen=!0,e.hasBomb?(this.smiley="dead",this.haveFinished=!0,this.timerStop=!0,this.haveWon=!1,this.revealGrid()):(e.bombNb=this.getNumberNeighboursBombs(t),this.cellRemaining--,0===this.cellRemaining&&(this.haveFinished=!0,this.smiley="cool",this.newScore=!0,this.timerStop=!0),0===e.bombNb&&this.openNeighbours(t)))}},addFlag:function(e){this.haveFinished||!this.haveBegun||e.isOpen||(e.hasFlag=!e.hasFlag,e.hasFlag?this.bombsRemaining--:this.bombsRemaining++)},doubleClick:function(e,t){!this.haveFinished&&this.haveBegun&&e.isOpen&&e.bombNb===this.getNumberNeighboursFlag(t)&&this.openNeighbours(t)},revealGrid:function(){for(var e=0;e<this.gridSize;e++)this.cellGrid[e].hasBomb&&!this.cellGrid[e].hasFlag&&(this.cellGrid[e].isOpen=!0)},openNeighbours:function(e){for(var t=this.getNeighboursIndex(e),s=0;s<t.length;s++)this.clickCell(this.cellGrid[t[s]],t[s])},isInNeighborhood:function(e,t){return e===t+1||e===t-1||e===t+this.nbCols||e===t-this.nbCols||e===t+this.nbCols+1||e===t+this.nbCols-1||e===t-this.nbCols+1||e===t-this.nbCols-1},getNeighboursIndex:function(e){for(var t=[],s=-1;s<2;s+=1)for(var i=-1;i<2;i+=1){var n=e+s+i*this.nbCols,o=e%this.nbCols==0,r=e%this.nbCols==this.nbCols-1;!(n!==e&&n>=0&&n<this.gridSize)||o&&-1===s||r&&1===s||t.push(n)}return t},getNumberNeighboursBombs:function(e){for(var t=0,s=this.getNeighboursIndex(e),i=0;i<s.length;i++)this.cellGrid[s[i]].hasBomb&&t++;return t},getNumberNeighboursFlag:function(e){for(var t=0,s=this.getNeighboursIndex(e),i=0;i<s.length;i++)this.cellGrid[s[i]].hasFlag&&t++;return t},newTime:function(e){this.time=e}},watch:{nbCols:function(){this.restart()},nbRows:function(){this.restart()},nbBombs:function(){this.restart()},restartGame:function(){this.restart()}}},p={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"game"},[s("div",{staticClass:"header"},[s("Help",{staticClass:"box"}),e._v(" "),s("div",{staticClass:"bombsRemaining box"},[e._v("\n      üí£ "+e._s(e.bombsRemaining)+"\n    ")]),e._v(" "),s("div",{staticClass:"smiley box",on:{click:function(t){return e.restart()}}},["happy"===e.smiley?s("span",[e._v("\n        üôÇ\n      ")]):e._e(),e._v(" "),"surprised"===e.smiley?s("span",[e._v("\n        üòÆ\n      ")]):e._e(),e._v(" "),"dead"===e.smiley?s("span",[e._v("\n        üò´\n      ")]):e._e(),e._v(" "),"cool"===e.smiley?s("span",[e._v("\n        üòé\n      ")]):e._e()]),e._v(" "),s("div",{staticClass:"timer box"},[s("Timer",{ref:"timer",attrs:{started:e.timerStart,stopped:e.timerStop},on:{time:e.newTime}})],1),e._v(" "),s("Scores",{ref:"scores",staticClass:"box scores",attrs:{"new-time":e.time,"new-score":e.newScore,"game-type":{nbCols:e.nbCols,nbRows:e.nbRows,nbBombs:e.nbBombs}}})],1),e._v(" "),s("div",{staticClass:"grid",style:e.getGridStyle()},e._l(e.cellGrid,function(t,i){return s("MineCell",{key:i,attrs:{hasBomb:t.hasBomb,isOpen:t.isOpen,hasFlag:t.hasFlag,bombNb:t.bombNb,"is-finished":e.haveFinished,"have-won":e.haveWon},nativeOn:{click:function(s){return e.clickCell(t,i)},contextmenu:[function(s){return e.addFlag(t)},function(e){e.preventDefault()}],dblclick:function(s){return s.preventDefault(),e.doubleClick(t,i)}}})}),1)])},staticRenderFns:[]};var f={name:"App",components:{MineCell:r,MineGrid:s("VU/8")(v,p,!1,function(e){s("W2Bo")},null,null).exports},data:function(){return{nbCols:10,nbRows:8,nbBombs:10,restart:!1}},methods:{difficulty:function(e){"easy"===e?(this.nbCols=10,this.nbRows=8,this.nbBombs=10):"intermediate"===e?(this.nbCols=16,this.nbRows=14,this.nbBombs=40):"normal"===e&&(this.nbCols=30,this.nbRows=16,this.nbBombs=99),this.restart=!0,setTimeout(function(){this.restart=!1},10)}}},g={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("b-navbar",{staticClass:"navbar",attrs:{toggleable:"lg",type:"dark"}},[s("b-navbar-brand",{attrs:{href:"#game"}},[e._v("Minesweeper")]),e._v(" "),s("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),e._v(" "),s("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[s("b-navbar-nav",[s("b-nav-text",[e._v("by")]),e._v(" "),s("b-nav-item",{attrs:{href:"https://felixfonteneau.github.io/"}},[e._v("F√©lix")])],1),e._v(" "),s("b-navbar-nav",{staticClass:"ml-auto"},[s("b-nav-item-dropdown",{attrs:{text:"Difficulty",right:""}},[s("b-dropdown-item",{attrs:{href:"#game"},on:{click:function(t){return e.difficulty("easy")}}},[e._v("Easy")]),e._v(" "),s("b-dropdown-item",{attrs:{href:"#game"},on:{click:function(t){return e.difficulty("intermediate")}}},[e._v("Intermediate")]),e._v(" "),s("b-dropdown-item",{attrs:{href:"#game"},on:{click:function(t){return e.difficulty("normal")}}},[e._v("Normal")])],1)],1)],1)],1),e._v(" "),s("MineGrid",{attrs:{id:"game","nb-cols":e.nbCols,"nb-rows":e.nbRows,"nb-bombs":e.nbBombs,"restart-game":e.restart}})],1)},staticRenderFns:[]};var _=s("VU/8")(f,g,!1,function(e){s("MXoo")},null,null).exports,C=s("/ocq");i.default.use(C.a);var y=new C.a({routes:[{path:"/",name:"MineCell",component:r}]}),w=s("Tqaz");s("Jmt5"),s("9M+g");i.default.config.productionTip=!1,i.default.use(w.a),i.default.use(w.b),new i.default({el:"#app",router:y,components:{App:_},template:"<App/>"})},W2Bo:function(e,t){},edT4:function(e,t){},"jP+e":function(e,t){},"u+4D":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.38f144ed65a769d6c4fa.js.map